!function(c){"use strict";let a,f,u=!1;redux.field_objects=redux.field_objects||{},redux.field_objects.custom_fonts=redux.field_objects.custom_fonts||{},redux.field_objects.custom_fonts.init=function(t){t=t||c(document).find(".redux-group-tab:visible").find(".redux-container-custom_font:visible"),c(t).each(function(){var t=c(this);let e=t;(e=t.hasClass("redux-field-container")?e:t.parents(".redux-field-container:first")).is(":hidden")||e.hasClass("redux-field-init")&&(e.removeClass("redux-field-init"),redux.field_objects.custom_fonts.modInit(t))})},redux.field_objects.custom_fonts.modInit=function(o){var t=c(".redux-ajax-security").data("opt-name");a=redux_custom_fonts_l10,f=void 0===t?redux:redux.optName,o.find(".checkbox").on("click",function(){let t=0;let e,n;"custom-font-convert"===c(this).attr("id")&&(c(this).is(":checked")?(e="",n=1,o.find(".conversion-types").removeClass("is-disabled")):(e="disabled",n=.7,o.find(".conversion-types").addClass("is-disabled")),o.find("#custom-font-eot,#custom-font-svg,#custom-font-ttf,#custom-font-woff,#custom-font-woff2").prop("disabled",e),o.find(".conversion-types").css("opacity",n)),c(this).is(":checked")&&(t=c(this).parent().find(".checkbox-check").attr("data-val")),c(this).parent().find(".checkbox-check").val(t),redux_change(c(this))}),o.find(".remove-font").off("click").on("click",function(){redux.field_objects.custom_fonts.remove_font(o,c(this).parents("fieldset.redux-field:first"))}),o.find(".media_add_font").off().on("click",function(t){redux.field_objects.custom_fonts.add_font(o,t,c(this).parents("fieldset.redux-field:first"))}),o.find(".fontDelete").on("click",function(t){const e=c(this).parents("td:first");return t.preventDefault(),e.find(".spinner").show(),(t=c(this).data()).action="redux_custom_fonts",t.nonce=c(this).parents(".redux-container-custom_font:first").find(".media_add_font").attr("data-nonce"),c.post(ajaxurl,t,function(t){(t=JSON.parse(t)).type&&"success"===t.type?(1===e.parents("table:first").find("tr").length?e.parents("table:first"):e.parents("tr:first")).fadeOut().remove():(alert(a.delete_error+" "+t.msg),e.find(".spinner").hide())}),!1})},redux.field_objects.custom_fonts.startTimer=function(n,o){let s;c.ajax({url:ajaxurl,type:"POST",data:{action:"redux_custom_font_timer",nonce:n.find(".media_add_font").attr("data-nonce")},beforeSend:function(){},success:function(t){let e;!1===u?(setTimeout(redux.field_objects.custom_fonts.startTimer(n,o),500),e=f.args.please_wait+": "+o+"<br><br>"+t):(e=a.complete,t="finished"),""!==t&&s!==t&&(c(".blockUI.blockMsg h2").html(e),s=t)}})},redux.field_objects.custom_fonts.add_font=function(i,t,d){let r;t.preventDefault(),r,(r=wp.media({multiple:!1,library:{type:["application","font"]},title:"Redux Custom Fonts:  "+a.media_title,button:{text:a.media_button}})).on("select",function(){var t,e;let n;var o=r.state().get("selection").first();const s=d.find(".font-error");s.slideUp(),s.find("span").text(""),r.close(),"application"!==o.attributes.type&&"font"!==o.attributes.type||(t=c(d).find(".media_add_font").attr("data-nonce"),e=c("#custom-font-convert").is(":checked"),t={action:"redux_custom_fonts",nonce:t,attachment_id:o.id,title:o.attributes.title,mime:o.attributes.mime,filename:o.attributes.filename,conversion:Boolean(e)},n="application/zip "===t.mime?a.unzip:a.convert,redux.field_objects.custom_fonts.startTimer(i,n),c.blockUI({message:"<h2>"+f.args.please_wait+": "+n+"</h2>"}),c.post(ajaxurl,t,function(t){if(console.log("Redux Custom Fonts API Response (For support purposes)"),console.log(t),"success"===(t=JSON.parse(t)).type){if(""!==t.msg)return c.unblockUI(),s.find("span").html(t.msg+"  "+a.partial),s.slideDown(),void(u=!0);window.onbeforeunload="",location.reload()}else"error"===t.type?(c.unblockUI(),s.find("span").html(t.msg)):(c.unblockUI(),s.find("span").text(a.unknown)),s.slideDown();u=!0}))}),r.open()},redux.field_objects.custom_fonts.remove_font=function(t,e){if(!e.find(".remove-image").addClass("hide"))return null},redux.field_objects.custom_fonts.sleep=function(t){var e=(new Date).getTime();let n;for(n=0;n<1e7&&!((new Date).getTime()-e>t);n+=1);}}(jQuery);