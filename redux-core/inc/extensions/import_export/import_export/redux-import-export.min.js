!function(d){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.import_export=redux.field_objects.import_export||{},redux.field_objects.import_export.copy_text=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.textContent=e,t.select(),document.execCommand("copy"),t.remove()},redux.field_objects.import_export.get_options=function(e){var t=d("#redux-export-code-copy"),o=ajaxurl+"?download=0&action=redux_download_options-"+redux.optName.args.opt_name+"&secret="+e;t.addClass("disabled").attr("disabled","disabled"),t.text(t.data("copy")),d.get(o,function(e){redux.field_objects.import_export.copy_text(e),t.removeClass("disabled"),t.text(t.data("copied")),setTimeout(function(){t.text(t.data("copy")).removeClass("disabled").removeAttr("disabled")},2e3)})},redux.field_objects.import_export.init=function(e){e=d.redux.getSelector(e,"import_export"),d(e).each(function(){var e,t,o=d(this),i=o;o.hasClass("redux-field-container")||(i=o.parents(".redux-field-container:first")),i.is(":hidden")||i.hasClass("redux-field-init")&&(i.removeClass("redux-field-init"),o.each(function(){d("#redux-import").click(function(e){if(""===d("#import-code-value").val()&&""===d("#import-link-value").val())return e.preventDefault(),!1}),d(this).find("#redux-import-code-button").click(function(){var e=d("#redux-import-code-wrapper");d("#redux-import-link-wrapper").is(":visible")?(d("#import-link-value").val(""),d("#redux-import-link-wrapper").fadeOut("fast",function(){e.fadeIn("fast",function(){d("#import-code-value").focus()})})):e.is(":visible")?e.fadeOut():e.fadeIn("medium",function(){d("#import-code-value").focus()})}),d(this).find("#redux-import-link-button").click(function(){var e=d("#redux-import-link-wrapper");d("#redux-import-code-wrapper").is(":visible")?(d("#import-code-value").text(""),d("#redux-import-code-wrapper").fadeOut("fast",function(){e.fadeIn("fast",function(){d("#import-link-value").focus()})})):e.is(":visible")?e.fadeOut():e.fadeIn("medium",function(){d("#import-link-value").focus()})}),d(this).find("#redux-export-code-dl").click(function(e){e.preventDefault(),window.onbeforeunload?confirm("Your panel has unchanged values, would you like to save them now?")&&(d("#redux_top_save").click(),setTimeout(function(){window.open(d(this).attr("href"))},2e3)):window.open(d(this).attr("href"))}),d(this).find("#redux-import-upload").click(function(){d("#redux-import-upload-file").click()}),document.getElementById("redux-import-upload-file").addEventListener("change",function(){var e=document.getElementById("redux-import-upload-file").files[0],t=new FileReader;d("#redux-import-upload span").text(": "+e.name),t.onload=function(){var e=t.result;d("#import-code-value").val(e)},t.readAsText(e)}),d(this).find("#redux-export-code-copy").click(function(e){var t=d("#redux-export-code"),o=d(this).data("secret");e.preventDefault(),window.onbeforeunload?confirm("Your panel has unchanged values, would you like to save them now?")&&(d("#redux_top_save").click(),setTimeout(function(){redux.field_objects.import_export.get_options(o,t)},2e3)):redux.field_objects.import_export.get_options(o,t)}),d(this).find("textarea").on("focusout",function(){var e=d(this).attr("id"),t=d(this),o=t;"import-link-value"!==e&&"import-code-value"!==e||(o=d(this).parent()),o.fadeOut("medium",function(){"redux-export-link-value"!==e&&t.text("")})}),d(this).find("#redux-export-link").click(function(){var e=d(this);e.addClass("disabled").attr("disabled","disabled"),e.text(e.data("copy")),redux.field_objects.import_export.copy_text(e.data("url")),e.removeClass("disabled"),e.text(e.data("copied")),setTimeout(function(){e.text(e.data("copy")).removeClass("disabled").removeAttr("disabled")},2e3)}),(e=document.getElementById("redux-export-code")).onfocus=function(){e.select(),e.onmouseup=function(){return e.onmouseup=null,!1}},(t=document.getElementById("import-code-value")).onfocus=function(){t.select(),t.onmouseup=function(){return t.onmouseup=null,!1}}}))})}}(jQuery);